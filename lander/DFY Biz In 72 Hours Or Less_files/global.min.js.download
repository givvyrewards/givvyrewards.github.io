!function(){var e={5194:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,i);break;default:if(!c)for(f=1,c=new Array(d-1);f<d;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||i&&!s[c].once||r&&s[c].context!==r)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},5623:function(e){var t=function(e){return e.replace(/^\s+|\s+$/g,"")};e.exports=function(e){if(!e)return{};for(var n,r={},i=t(e).split("\n"),o=0;o<i.length;o++){var a=i[o],s=a.indexOf(":"),c=t(a.slice(0,s)).toLowerCase(),u=t(a.slice(s+1));"undefined"===typeof r[c]?r[c]=u:(n=r[c],"[object Array]"===Object.prototype.toString.call(n)?r[c].push(u):r[c]=[r[c],u])}return r}},2728:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var r,o,a=[];for(o in"string"!==typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!==r&&undefined!==r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;a.push(o+"="+r)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),a=r(t[2]);null===o||null===a||o in i||(i[o]=a)}return i}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=t.apply(n,r);function s(t){e(a,i,o,s,c,"next",t)}function c(t){e(a,i,o,s,c,"throw",t)}s(void 0)}))}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(c){s=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(G){s=[6,G],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(G){return!1}}function p(e,t,n){return p=y()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&f(i,n.prototype),i},p.apply(null,arguments)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function m(e){var t="function"===typeof Map?new Map:void 0;return m=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,g(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)},m(e)}function w(e,t){return!t||"object"!==((n=t)&&"undefined"!==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&"function"!==typeof t?d(e):t;var n}function E(e){var t=y();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}var b=n(2728);function S(e){return new Promise((function(t){return setTimeout(t,e)}))}var _=n(5623),I=n.n(_);var P=["delete","get","head","options"],k=["post","put","patch"],A=function(e){h(n,e);var t=E(n);function n(e,i,o,s){var c;return r(this,n),a(d(c=t.call(this,e)),"status",void 0),a(d(c),"options",void 0),a(d(c),"result",void 0),c.name="RequestError",i&&(c.status=i),o&&(c.options=o),s&&(c.result=s),Error.captureStackTrace?Error.captureStackTrace(d(c),c.constructor):c.stack=(new Error).stack,c}return n}(m(Error));a(A,"isRequestError",!0);var T={headers:{},retryDelay:function(e){var t=1e3*Math.pow(2,e);return t+.2*t*Math.random()},responseType:"text",shouldRetry:function(){return!0},isStatusValid:function(e){return e>=200&&e<300}};var C=function e(){var t=v({},T,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});function n(e,r,i,o,a){var s,c=e,l=v({},t,r),d=!1,f=new XMLHttpRequest,h={requestStart:Date.now()};if("string"!==typeof e&&(c=e.url,l=v({},t,e)),l.baseUrl&&(c="".concat(l.baseUrl).concat(c)),l.params){var y=u(c.split("?"),1)[0],p=b.stringify(l.params,"?");c="".concat(y).concat(p)}var g,m=null!==(s=l.method)&&void 0!==s?s:i;m=null===m||void 0===m?void 0:m.toUpperCase();var w,E=null!==(g=l.data)&&void 0!==g?g:o;return"object"===typeof E&&(E=JSON.stringify(E),l.headers&&!l.headers["Content-Type"]&&(l.headers["Content-Type"]="application/json; charset=utf-8")),l.withCredentials&&(f.withCredentials=!0),l.responseType&&(f.responseType=l.responseType),l.timeout&&(w=window.setTimeout((function(){d=!0,f.abort()}),l.timeout)),new Promise((function(e,t){for(var n in f.open(m,c,!0),l.headers)f.setRequestHeader(n,l.headers[n]);f.onreadystatechange=function(){if(d)return e(new A("Request was aborted due to exceeded timeout",f.status,l));if(2===f.readyState&&(h.lookupTime=Date.now()-h.requestStart),4===f.readyState){w&&clearTimeout(w),h.requestEnd=Date.now(),h.totalTime=h.requestEnd-h.requestStart,h.responseLength=f.response.length;var t=f.response;"text"===l.responseType&&(t=function(e){try{return JSON.parse(e)}catch(t){return e}}(f.responseText));var n=I()(f.getAllResponseHeaders()),r={options:l,data:t,headers:n,timing:h,status:f.status,statusText:f.statusText,xhr:f};l.isStatusValid(f.status)||e(new A("Request failed with status code ".concat(f.status),f.status,l,r)),e(r)}},f.onerror=t,f.send(E)})).then((function(t){if(t instanceof Error){var s=null!==a&&void 0!==a?a:l.retries;if(l.shouldRetry(t)&&"number"===typeof s&&s>0){var c=Promise.resolve();if(l.retryDelay){var u=l.retries-s,d=l.retryDelay;"function"===typeof d&&(d=d(u)),c=S(d)}return c.then((function(){return n(e,r,i,o,s-1)}))}return Promise.reject(t)}return Promise.resolve(t)}))}var r=n;return r.createInstance=e,P.forEach((function(e){r[e]=function(t,r){return n(t,r,e)}})),k.forEach((function(e){r[e]=function(t,r,i){return n(t,i,e,r)}})),r}();function L(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(G){return!1}}function R(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e){return e&&"object"===typeof e};return t.reduce((function(e,t){return Object.keys(t).forEach((function(n){var i,o=e[n],a=t[n];Array.isArray(o)&&Array.isArray(a)?e[n]=(i=o).concat.apply(i,R(a)):r(o)&&r(a)?e[n]=N(o,a):e[n]=a})),e}),{})}function O(e,t){var n={};for(var r in e)null!==e[r]?"object"!==typeof e[r]||Array.isArray(e[r])?n[r]=e[r]:n[r]=O(e[r],t?t[r]:void 0):t&&!(r in t)&&(n[r]=e[r]);return n}function V(e){var t={};for(var n in e)"object"===typeof e[n]&&null!==e[n]?Array.isArray(e[n])?t[n]=e[n].map((function(e){return"number"===typeof e?String(e):e})):t[n]=V(e[n]):"number"===typeof e[n]?t[n]=String(e[n]):t[n]=e[n];return t}function M(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}let U=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&n[e]];return t};var D=n(5194);function x(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var j=function e(t,n){function r(e,r,i){if("undefined"!==typeof document){"number"===typeof(i=x({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+o}}return Object.create({set:r,get:function(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=t.read(a,s),e===s)break}catch(G){}}return e?r[e]:r}},remove:function(e,t){r(e,"",x({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,x({},this.attributes,t))},withConverter:function(t){return e(x({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function G(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function B(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}"function"==typeof SuppressedError&&SuppressedError;var F={exclude:[],include:[],logging:!0};var K={},H={timeout:"true"},q=function(e,t){"undefined"!=typeof window&&(K[e]=t)},Y=function(){return Object.fromEntries(Object.entries(K).filter((function(e){var t,n=e[0];return!(null===(t=null==F?void 0:F.exclude)||void 0===t?void 0:t.includes(n))})).filter((function(e){var t,n,r,i,o=e[0];return(null===(t=null==F?void 0:F.include)||void 0===t?void 0:t.some((function(e){return e.includes(".")})))?null===(n=null==F?void 0:F.include)||void 0===n?void 0:n.some((function(e){return e.startsWith(o)})):0===(null===(r=null==F?void 0:F.include)||void 0===r?void 0:r.length)||(null===(i=null==F?void 0:F.include)||void 0===i?void 0:i.includes(o))})).map((function(e){return[e[0],(0,e[1])()]})))};function W(e){return e^=e>>>16,e=Math.imul(e,2246822507),e^=e>>>13,e=Math.imul(e,3266489909),(e^=e>>>16)>>>0}var z=new Uint32Array([597399067,2869860233,951274213,2716044179]);function Z(e,t){return e<<t|e>>>32-t}function J(e,t){var n;if(void 0===t&&(t=0),t=t?0|t:0,"string"==typeof e&&(n=e,e=(new TextEncoder).encode(n).buffer),!(e instanceof ArrayBuffer))throw new TypeError("Expected key to be ArrayBuffer or string");var r=new Uint32Array([t,t,t,t]);!function(e,t){for(var n=e.byteLength/16|0,r=new Uint32Array(e,0,4*n),i=0;i<n;i++){var o=r.subarray(4*i,4*(i+1));o[0]=Math.imul(o[0],z[0]),o[0]=Z(o[0],15),o[0]=Math.imul(o[0],z[1]),t[0]=t[0]^o[0],t[0]=Z(t[0],19),t[0]=t[0]+t[1],t[0]=Math.imul(t[0],5)+1444728091,o[1]=Math.imul(o[1],z[1]),o[1]=Z(o[1],16),o[1]=Math.imul(o[1],z[2]),t[1]=t[1]^o[1],t[1]=Z(t[1],17),t[1]=t[1]+t[2],t[1]=Math.imul(t[1],5)+197830471,o[2]=Math.imul(o[2],z[2]),o[2]=Z(o[2],17),o[2]=Math.imul(o[2],z[3]),t[2]=t[2]^o[2],t[2]=Z(t[2],15),t[2]=t[2]+t[3],t[2]=Math.imul(t[2],5)+2530024501,o[3]=Math.imul(o[3],z[3]),o[3]=Z(o[3],18),o[3]=Math.imul(o[3],z[0]),t[3]=t[3]^o[3],t[3]=Z(t[3],13),t[3]=t[3]+t[0],t[3]=Math.imul(t[3],5)+850148119}}(e,r),function(e,t){var n=e.byteLength/16|0,r=e.byteLength%16,i=new Uint32Array(4),o=new Uint8Array(e,16*n,r);switch(r){case 15:i[3]=i[3]^o[14]<<16;case 14:i[3]=i[3]^o[13]<<8;case 13:i[3]=i[3]^o[12]<<0,i[3]=Math.imul(i[3],z[3]),i[3]=Z(i[3],18),i[3]=Math.imul(i[3],z[0]),t[3]=t[3]^i[3];case 12:i[2]=i[2]^o[11]<<24;case 11:i[2]=i[2]^o[10]<<16;case 10:i[2]=i[2]^o[9]<<8;case 9:i[2]=i[2]^o[8]<<0,i[2]=Math.imul(i[2],z[2]),i[2]=Z(i[2],17),i[2]=Math.imul(i[2],z[3]),t[2]=t[2]^i[2];case 8:i[1]=i[1]^o[7]<<24;case 7:i[1]=i[1]^o[6]<<16;case 6:i[1]=i[1]^o[5]<<8;case 5:i[1]=i[1]^o[4]<<0,i[1]=Math.imul(i[1],z[1]),i[1]=Z(i[1],16),i[1]=Math.imul(i[1],z[2]),t[1]=t[1]^i[1];case 4:i[0]=i[0]^o[3]<<24;case 3:i[0]=i[0]^o[2]<<16;case 2:i[0]=i[0]^o[1]<<8;case 1:i[0]=i[0]^o[0]<<0,i[0]=Math.imul(i[0],z[0]),i[0]=Z(i[0],15),i[0]=Math.imul(i[0],z[1]),t[0]=t[0]^i[0]}}(e,r),function(e,t){t[0]=t[0]^e.byteLength,t[1]=t[1]^e.byteLength,t[2]=t[2]^e.byteLength,t[3]=t[3]^e.byteLength,t[0]=t[0]+t[1]|0,t[0]=t[0]+t[2]|0,t[0]=t[0]+t[3]|0,t[1]=t[1]+t[0]|0,t[2]=t[2]+t[0]|0,t[3]=t[3]+t[0]|0,t[0]=W(t[0]),t[1]=W(t[1]),t[2]=W(t[2]),t[3]=W(t[3]),t[0]=t[0]+t[1]|0,t[0]=t[0]+t[2]|0,t[0]=t[0]+t[3]|0,t[1]=t[1]+t[0]|0,t[2]=t[2]+t[0]|0,t[3]=t[3]+t[0]|0}(e,r);var i=new Uint8Array(r.buffer);return Array.from(i).map((function(e){return e.toString(16).padStart(2,"0")})).join("")}function $(e,t){return new Promise((function(n){setTimeout((function(){return n(t)}),e)}))}function X(e,t,n){return Promise.all(e.map((function(e){return Promise.race([e,$(t,n)])})))}function Q(){return G(this,void 0,void 0,(function(){var e,t,n,r,i;return B(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),e=Y(),t=Object.keys(e),[4,X(Object.values(e),(null==F?void 0:F.timeout)||1e3,H)];case 1:return n=o.sent(),r=n.filter((function(e){return void 0!==e})),i={},r.forEach((function(e,n){i[t[n]]=e})),[2,ee(i,F.exclude||[],F.include||[],"")];case 2:throw o.sent();case 3:return[2]}}))}))}function ee(e,t,n,r){void 0===r&&(r="");for(var i={},o=function(e,o){var a=r+e+".";if("object"!=typeof o||Array.isArray(o)){var s=t.some((function(e){return a.startsWith(e)})),c=n.some((function(e){return a.startsWith(e)}));s&&!c||(i[e]=o)}else{var u=ee(o,t,n,a);Object.keys(u).length>0&&(i[e]=u)}},a=0,s=Object.entries(e);a<s.length;a++){var c=s[a];o(c[0],c[1])}return i}function te(e){for(var t=0,n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}function ne(e,t,n){for(var r=[],i=0;i<e[0].data.length;i++){for(var o=[],a=0;a<e.length;a++)o.push(e[a].data[i]);r.push(re(o))}var s=new Uint8ClampedArray(r);return new ImageData(s,t,n)}function re(e){if(0===e.length)return 0;for(var t={},n=0,r=e;n<r.length;n++)t[o=r[n]]=(t[o]||0)+1;var i=e[0];for(var o in t)t[o]>t[i]&&(i=parseInt(o,10));return i}function ie(){if("undefined"==typeof navigator)return{name:"unknown",version:"unknown"};for(var e=navigator.userAgent,t={Edg:"Edge",OPR:"Opera"},n=0,r=[/(?<name>Edge|Edg)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Chrome|Chromium|OPR|Opera|Vivaldi|Brave))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Firefox|Waterfox|Iceweasel|IceCat))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>Safari)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>MSIE|Trident|IEMobile).+?(?<version>\d+(?:\.\d+)?)/,/(?<name>[A-Za-z]+)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>SamsungBrowser)\/(?<version>\d+(?:\.\d+)?)/];n<r.length;n++){var i=r[n],o=e.match(i);if(o&&o.groups)return{name:t[o.groups.name]||o.groups.name,version:o.groups.version}}return{name:"unknown",version:"unknown"}}q("audio",(function(){return G(this,void 0,void 0,(function(){return B(this,(function(e){return[2,new Promise((function(e,t){try{var n=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,5e3,44100),r=n.createBufferSource(),i=n.createOscillator();i.frequency.value=1e3;var o,a=n.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.2,i.connect(a),a.connect(n.destination),i.start(),n.oncomplete=function(t){o=t.renderedBuffer.getChannelData(0),e({sampleHash:te(o),oscillator:i.type,maxChannels:n.destination.maxChannelCount,channelCountMode:r.channelCountMode})},n.startRendering()}catch(e){console.error("Error creating audio fingerprint:",e),t(e)}}))]}))}))}));var oe="SamsungBrowser"!==ie().name?1:3;"Firefox"!=ie().name&&q("canvas",(function(){return document.createElement("canvas").getContext("2d"),new Promise((function(e){var t=Array.from({length:oe},(function(){return function(){var e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return new ImageData(1,1);e.width=280,e.height=20;var n=t.createLinearGradient(0,0,e.width,e.height);n.addColorStop(0,"red"),n.addColorStop(1/6,"orange"),n.addColorStop(2/6,"yellow"),n.addColorStop(.5,"green"),n.addColorStop(4/6,"blue"),n.addColorStop(5/6,"indigo"),n.addColorStop(1,"violet"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height);var r="Random Text WMwmil10Oo";return t.font="23.123px Arial",t.fillStyle="black",t.fillText(r,-5,15),t.fillStyle="rgba(0, 0, 255, 0.5)",t.fillText(r,-3.3,17.7),t.beginPath(),t.moveTo(0,0),t.lineTo(2*e.width/7,e.height),t.strokeStyle="white",t.lineWidth=2,t.stroke(),t.getImageData(0,0,e.width,e.height)}()}));e({commonImageDataHash:J(ne(t,280,20).data.toString()).toString()})}))}));var ae,se=["Arial","Arial Black","Arial Narrow","Arial Rounded MT","Arimo","Archivo","Barlow","Bebas Neue","Bitter","Bookman","Calibri","Cabin","Candara","Century","Century Gothic","Comic Sans MS","Constantia","Courier","Courier New","Crimson Text","DM Mono","DM Sans","DM Serif Display","DM Serif Text","Dosis","Droid Sans","Exo","Fira Code","Fira Sans","Franklin Gothic Medium","Garamond","Geneva","Georgia","Gill Sans","Helvetica","Impact","Inconsolata","Indie Flower","Inter","Josefin Sans","Karla","Lato","Lexend","Lucida Bright","Lucida Console","Lucida Sans Unicode","Manrope","Merriweather","Merriweather Sans","Montserrat","Myriad","Noto Sans","Nunito","Nunito Sans","Open Sans","Optima","Orbitron","Oswald","Pacifico","Palatino","Perpetua","PT Sans","PT Serif","Poppins","Prompt","Public Sans","Quicksand","Rajdhani","Recursive","Roboto","Roboto Condensed","Rockwell","Rubik","Segoe Print","Segoe Script","Segoe UI","Sora","Source Sans Pro","Space Mono","Tahoma","Taviraj","Times","Times New Roman","Titillium Web","Trebuchet MS","Ubuntu","Varela Round","Verdana","Work Sans"],ce=["monospace","sans-serif","serif"];function ue(e,t){if(!e)throw new Error("Canvas context not supported");return e.font,e.font="72px ".concat(t),e.measureText("WwMmLli0Oo").width}function le(){var e,t=document.createElement("canvas"),n=null!==(e=t.getContext("webgl"))&&void 0!==e?e:t.getContext("experimental-webgl");if(n&&"getParameter"in n)try{var r=(n.getParameter(n.VENDOR)||"").toString(),i=(n.getParameter(n.RENDERER)||"").toString(),o={vendor:r,renderer:i,version:(n.getParameter(n.VERSION)||"").toString(),shadingLanguageVersion:(n.getParameter(n.SHADING_LANGUAGE_VERSION)||"").toString()};if(!i.length||!r.length){var a=n.getExtension("WEBGL_debug_renderer_info");if(a){var s=(n.getParameter(a.UNMASKED_VENDOR_WEBGL)||"").toString(),c=(n.getParameter(a.UNMASKED_RENDERER_WEBGL)||"").toString();s&&(o.vendorUnmasked=s),c&&(o.rendererUnmasked=c)}}return o}catch(e){}return"undefined"}function de(){var e=new Float32Array(1),t=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],t[3]}function fe(){var e=[],t={"prefers-contrast":["high","more","low","less","forced","no-preference"],"any-hover":["hover","none"],"any-pointer":["none","coarse","fine"],pointer:["none","coarse","fine"],hover:["hover","none"],update:["fast","slow"],"inverted-colors":["inverted","none"],"prefers-reduced-motion":["reduce","no-preference"],"prefers-reduced-transparency":["reduce","no-preference"],scripting:["none","initial-only","enabled"],"forced-colors":["active","none"]};return Object.keys(t).forEach((function(n){t[n].forEach((function(t){matchMedia("(".concat(n,": ").concat(t,")")).matches&&e.push("".concat(n,": ").concat(t))}))})),e}function he(){if("https:"===window.location.protocol&&"function"==typeof window.ApplePaySession)try{for(var e=window.ApplePaySession.supportsVersion,t=15;t>0;t--)if(e(t))return t}catch(e){return 0}return 0}"Firefox"!=ie().name&&q("fonts",(function(){var e=this;return new Promise((function(t,n){try{!function(e){var t;G(this,void 0,void 0,(function(){var n,r,i;return B(this,(function(o){switch(o.label){case 0:return document.body?[3,2]:[4,(50,new Promise((function(e){return setTimeout(e,50,undefined)})))];case 1:return o.sent(),[3,0];case 2:if((n=document.createElement("iframe")).setAttribute("frameBorder","0"),(r=n.style).setProperty("position","fixed"),r.setProperty("display","block","important"),r.setProperty("visibility","visible"),r.setProperty("border","0"),r.setProperty("opacity","0"),n.src="about:blank",document.body.appendChild(n),!(i=n.contentDocument||(null===(t=n.contentWindow)||void 0===t?void 0:t.document)))throw new Error("Iframe document is not accessible");return e({iframe:i}),setTimeout((function(){document.body.removeChild(n)}),0),[2]}}))}))}((function(n){var r=n.iframe;return G(e,void 0,void 0,(function(){var e,n,i,o;return B(this,(function(a){return e=r.createElement("canvas"),n=e.getContext("2d"),i=ce.map((function(e){return ue(n,e)})),o={},se.forEach((function(e){var t=ue(n,e);i.includes(t)||(o[e]=t)})),t(o),[2]}))}))}))}catch(G){n({error:"unsupported"})}}))})),q("hardware",(function(){return new Promise((function(e,t){var n=void 0!==navigator.deviceMemory?navigator.deviceMemory:0,r=window.performance&&window.performance.memory?window.performance.memory:0;e({videocard:le(),architecture:de(),deviceMemory:n.toString()||"undefined",jsHeapSizeLimit:r.jsHeapSizeLimit||0})}))})),q("locales",(function(){return new Promise((function(e){e({languages:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})}))})),q("permissions",(function(){return G(this,void 0,void 0,(function(){var e;return B(this,(function(t){return ae=(null==F?void 0:F.permissions_to_check)||["accelerometer","accessibility","accessibility-events","ambient-light-sensor","background-fetch","background-sync","bluetooth","camera","clipboard-read","clipboard-write","device-info","display-capture","gyroscope","geolocation","local-fonts","magnetometer","microphone","midi","nfc","notifications","payment-handler","persistent-storage","push","speaker","storage-access","top-level-storage-access","window-management","query"],e=Array.from({length:(null==F?void 0:F.retries)||3},(function(){return function(){return G(this,void 0,void 0,(function(){var e,t,n,r,i;return B(this,(function(o){switch(o.label){case 0:e={},t=0,n=ae,o.label=1;case 1:if(!(t<n.length))return[3,6];r=n[t],o.label=2;case 2:return o.trys.push([2,4,,5]),[4,navigator.permissions.query({name:r})];case 3:return i=o.sent(),e[r]=i.state.toString(),[3,5];case 4:return o.sent(),[3,5];case 5:return t++,[3,1];case 6:return[2,e]}}))}))}()})),[2,Promise.all(e).then((function(e){return function(e,t){var n={};return t.forEach((function(t){var r=function(e){if(0===e.length)return null;var t={};e.forEach((function(e){var n=String(e);t[n]=(t[n]||0)+1}));var n=e[0],r=1;return Object.keys(t).forEach((function(e){t[e]>r&&(n=e,r=t[e])})),n}(e.map((function(e){return t in e?e[t]:void 0})).filter((function(e){return void 0!==e})));r&&(n[t]=r)})),n}(e,ae)}))]}))}))})),q("plugins",(function(){var e=[];if(navigator.plugins)for(var t=0;t<navigator.plugins.length;t++){var n=navigator.plugins[t];e.push([n.name,n.filename,n.description].join("|"))}return new Promise((function(t){t({plugins:e})}))})),q("screen",(function(){return new Promise((function(e){e({is_touchscreen:navigator.maxTouchPoints>0,maxTouchPoints:navigator.maxTouchPoints,colorDepth:screen.colorDepth,mediaMatches:fe()})}))})),q("system",(function(){return new Promise((function(e){var t=ie();e({platform:window.navigator.platform,cookieEnabled:window.navigator.cookieEnabled,productSub:navigator.productSub,product:navigator.product,useragent:navigator.userAgent,hardwareConcurrency:navigator.hardwareConcurrency,browser:{name:t.name,version:t.version},applePayVersion:he()})}))}));var ve,ye="SamsungBrowser"!==ie().name?1:3,pe=null;q("webgl",(function(){return G(this,void 0,void 0,(function(){var e;return B(this,(function(t){"undefined"!=typeof document&&((ve=document.createElement("canvas")).width=200,ve.height=100,pe=ve.getContext("webgl"));try{if(!pe)throw new Error("WebGL not supported");return e=Array.from({length:ye},(function(){return function(){try{if(!pe)throw new Error("WebGL not supported");var t=pe.createShader(pe.VERTEX_SHADER),n=pe.createShader(pe.FRAGMENT_SHADER);if(!t||!n)throw new Error("Failed to create shaders");if(pe.shaderSource(t,"\n          attribute vec2 position;\n          void main() {\n              gl_Position = vec4(position, 0.0, 1.0);\n          }\n      "),pe.shaderSource(n,"\n          precision mediump float;\n          void main() {\n              gl_FragColor = vec4(0.812, 0.195, 0.553, 0.921); // Set line color\n          }\n      "),pe.compileShader(t),!pe.getShaderParameter(t,pe.COMPILE_STATUS))throw new Error("Vertex shader compilation failed: "+pe.getShaderInfoLog(t));if(pe.compileShader(n),!pe.getShaderParameter(n,pe.COMPILE_STATUS))throw new Error("Fragment shader compilation failed: "+pe.getShaderInfoLog(n));var r=pe.createProgram();if(!r)throw new Error("Failed to create shader program");if(pe.attachShader(r,t),pe.attachShader(r,n),pe.linkProgram(r),!pe.getProgramParameter(r,pe.LINK_STATUS))throw new Error("Shader program linking failed: "+pe.getProgramInfoLog(r));pe.useProgram(r);for(var i=137,o=new Float32Array(548),a=2*Math.PI/i,s=0;s<i;s++){var c=s*a;o[4*s]=0,o[4*s+1]=0,o[4*s+2]=Math.cos(c)*(ve.width/2),o[4*s+3]=Math.sin(c)*(ve.height/2)}var u=pe.createBuffer();pe.bindBuffer(pe.ARRAY_BUFFER,u),pe.bufferData(pe.ARRAY_BUFFER,o,pe.STATIC_DRAW);var l=pe.getAttribLocation(r,"position");pe.enableVertexAttribArray(l),pe.vertexAttribPointer(l,2,pe.FLOAT,!1,0,0),pe.viewport(0,0,ve.width,ve.height),pe.clearColor(0,0,0,1),pe.clear(pe.COLOR_BUFFER_BIT),pe.drawArrays(pe.LINES,0,274);var d=new Uint8ClampedArray(ve.width*ve.height*4);return pe.readPixels(0,0,ve.width,ve.height,pe.RGBA,pe.UNSIGNED_BYTE,d),new ImageData(d,ve.width,ve.height)}catch(e){return new ImageData(1,1)}finally{pe&&(pe.bindBuffer(pe.ARRAY_BUFFER,null),pe.useProgram(null),pe.viewport(0,0,pe.drawingBufferWidth,pe.drawingBufferHeight),pe.clearColor(0,0,0,0))}}()})),[2,{commonImageHash:J(ne(e,ve.width,ve.height).data.toString()).toString()}]}catch(e){return[2,{webgl:"unsupported"}]}return[2]}))}))}));var ge=function(e,t,n,r){for(var i=(n-t)/r,o=0,a=0;a<r;a++)o+=e(t+(a+.5)*i);return o*i};q("math",(function(){return G(void 0,void 0,void 0,(function(){return B(this,(function(e){return[2,{acos:Math.acos(.5),asin:ge(Math.asin,-1,1,97),atan:ge(Math.atan,-1,1,97),cos:ge(Math.cos,0,Math.PI,97),cosh:Math.cosh(9/7),e:Math.E,largeCos:Math.cos(1e20),largeSin:Math.sin(1e20),largeTan:Math.tan(1e20),log:Math.log(1e3),pi:Math.PI,sin:ge(Math.sin,-Math.PI,Math.PI,97),sinh:ge(Math.sinh,-9/7,7/9,97),sqrt:Math.sqrt(2),tan:ge(Math.tan,0,2*Math.PI,97),tanh:ge(Math.tanh,-9/7,7/9,97)}]}))}))}));var me=3432918353,we=461845907,Ee=2246822507,be=3266489909;function Se(e,t){return e<<t|e>>>32-t}var _e=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,r=3&e.length,i=e.length-r,o=0;o<i;)n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24,++o,n=Se(n=Math.imul(n,me),15),t=Se(t^=n=Math.imul(n,we),13),t=Math.imul(t,5)+3864292196;switch(n=0,r){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n^=255&e.charCodeAt(o),n=Se(n=Math.imul(n,me),15),t^=n=Math.imul(n,we)}return((t=function(e){return e^=e>>>16,e=Math.imul(e,Ee),e^=e>>>13,e=Math.imul(e,be),e^e>>>16}(t^=e.length))>>>0).toString(36)};function Ie(e){if(e)return _e(JSON.stringify(e))}function Pe(){return(Pe=t((function(){var e,t,n,r,i,o,a,s,c,u,d,f,h,v,y,p,g,m,w,E,b,S;return l(this,(function(l){switch(l.label){case 0:return[4,Q()];case 1:return S=l.sent(),[2,O(V({c:Ie(null===(e=S.canvas)||void 0===e?void 0:e.commonImage),a:{s:null===(t=S.audio)||void 0===t?void 0:t.sampleHash,o:null===(n=S.audio)||void 0===n?void 0:n.oscillator,m:null===(r=S.audio)||void 0===r?void 0:r.maxChannels,c:null===(i=S.audio)||void 0===i?void 0:i.channelCountMode},h:{v:Ie(null===(o=S.hardware)||void 0===o?void 0:o.videocard),a:null===(a=S.hardware)||void 0===a?void 0:a.architecture,d:null===(s=S.hardware)||void 0===s?void 0:s.deviceMemory,h:null===(c=S.hardware)||void 0===c?void 0:c.jsHeapSizeLimit},f:Ie(S.fonts),l:{l:null===(u=S.locales)||void 0===u?void 0:u.languages,t:null===(d=S.locales)||void 0===d?void 0:d.timezone},p:Ie(S.permissions),pl:Ie(S.plugins),s:{i:!!(null===(f=S.screen)||void 0===f?void 0:f.is_touchscreen),m:null===(h=S.screen)||void 0===h?void 0:h.maxTouchPoints,c:null===(v=S.screen)||void 0===v?void 0:v.colorDepth,mm:Ie(null===(y=S.screen)||void 0===y?void 0:y.mediaMatches)},sy:{p:null===(p=S.system)||void 0===p?void 0:p.platform,c:!!(null===(g=S.system)||void 0===g?void 0:g.cookieEnabled),ps:null===(m=S.system)||void 0===m?void 0:m.productSub,pr:null===(w=S.system)||void 0===w?void 0:w.product,a:null===(E=S.system)||void 0===E?void 0:E.applePayVersion},w:Ie(null===(b=S.webgl)||void 0===b?void 0:b.commonImageHash),m:Ie(S.math)}))]}}))}))).apply(this,arguments)}!function(e,t){if(!["include","exclude","permissions_to_check","retries","timeout","logging"].includes(e))throw new Error("Unknown option "+e);if(["include","exclude","permissions_to_check"].includes(e)&&(!Array.isArray(t)||!t.every((function(e){return"string"==typeof e}))))throw new Error("The value of the include, exclude and permissions_to_check must be an array of strings");if(["retries","timeout"].includes(e)&&"number"!=typeof t)throw new Error("The value of retries must be a number");F[e]=t}("logging",!1);var ke,Ae,Te,Ce=function(){return Pe.apply(this,arguments)},Le=function(e){return Array.isArray(e)?e:[e]};!function(e){e.LOGO="Logo",e.POWERED_BY="Powered By",e.ERROR_MESSAGE="Player Error Message"}(ke||(ke={})),function(e){e.FIRST="false",e.RETURNING="true"}(Ae||(Ae={})),function(e){e.MANUAL="manual",e.AUTO="auto"}(Te||(Te={}));var Re,Ne,Oe,Ve,Me,Ue,De,xe,je={development:{BASE_URL:"https://fast.vidalytics.com",TRACKING_BASE_URL:"https://stats.dev.vidalytics.com",API_URL:"https://api.dev.vidalytics.com",ANALYTICS_LICENSE_KEY:"c4834298-0629-4334-9a7d-201b35bc92ab"},production:{BASE_URL:"https://fast.vidalytics.com",TRACKING_BASE_URL:"https://stats.vidalytics.com",API_URL:"https://api.vidalytics.com",ANALYTICS_LICENSE_KEY:"d4c2598d-2c00-4d64-89ef-2dc2239df17d"}},Ge="/scribe",Be=function(e){h(n,e);var t=E(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).name="EventTimeoutError",i}return n}(m(Error));function Fe(e,t,n){return Ke.apply(this,arguments)}function Ke(){return(Ke=t((function(e,t,n){return l(this,(function(r){return e&&t?[2,new Promise((function(r,i){var o;function a(){o&&clearTimeout(o),r()}n&&(o=setTimeout((function(){e.off(t,a),i(new Be("Event `".concat(t,"` timed out")))}),n)),e.once(t,a)}))]:[2]}))}))).apply(this,arguments)}!function(e){e.CONVERSION="Vidalytics.EVENT_CONVERSION",e.CTA_CLICKED="Vidalytics.Player.EVENT_CTA_CLICKED",e.CTA_DISPLAYED="Vidalytics.Player.EVENT_CTA_DISPLAYED",e.CTA_HIDDEN="Vidalytics.Player.EVENT_CTA_HIDDEN",e.LINK_CLICKED="Vidalytics.Player.EVENT_LINK_CLICKED",e.FUNNEL_CHOICE_SELECTED="Vidalytics.Player.EVENT_FUNNEL_CHOICE_SELECTED",e.FUNNEL_INTERACTION_SHOW="Vidalytics.Player.EVENT_FUNNEL_INTERACTION_SHOW",e.ERROR="Vidalytics.Player.EVENT_ERROR",e.INITIALIZED="Vidalytics.Player.EVENT_INITIALIZED",e.PAUSE="Vidalytics.Player.EVENT_PAUSE",e.PLAY="Vidalytics.Player.EVENT_PLAY",e.PLAYER_CREATED="Vidalytics.Player.EVENT_PLAYER_CREATED",e.PLAYING="Vidalytics.Player.EVENT_PLAYING",e.PLAYED="Vidalytics.Player.EVENT_PLAYED",e.PLAY_GATE="Vidalytics.Player.EVENT_PLAY_GATE",e.PLAY_GATE_SHOW="Vidalytics.Player.EVENT_PLAY_GATE_SHOW",e.PLAY_GATE_SKIPPED="Vidalytics.Player.EVENT_PLAY_GATE_SKIPPED",e.RESTART="Vidalytics.Player.EVENT_RESTART",e.RESUME="Vidalytics.Player.EVENT_RESUME",e.RESIZED="Vidalytics.Player.EVENT_RESIZED",e.STOP="Vidalytics.Player.EVENT_STOP",e.SEEK="Vidalytics.Player.EVENT_SEEK",e.SEEK_TO="Vidalytics.Player.EVENT_SEEK_TO",e.TRIGGER="Vidalytics.Player.EVENT_TRIGGER",e.TIME_CHANGED="Vidalytics.Player.EVENT_TIME_CHANGED",e.UNMUTE="Vidalytics.Player.UNMUTE",e.VIDEO_FULLSCREEN="Vidalytics.Player.EVENT_VIDEO_FULLSCREEN",e.VIDEO_FULLSCREEN_CLOSE="Vidalytics.Player.EVENT_VIDEO_FULLSCREEN_CLOSE",e.RESOLUTION_CHANGED="Vidalytics.Player.EVENT_RESOLUTION_CHANGED",e.PLAYBACK_STARTED="Vidalytics.Player.EVENT_PLAYBACK_STARTED",e.BUFFERING="Vidalytics.Player.EVENT_BUFFERING",e.FRAGMENT_LOADED="Vidalytics.Player.EVENT_FRAG_LOADED",e.USER_ACTING="Vidalytics.Player.EVENT_USER_ACTING",e.GLOBAL_INIT="Vidalytics.Global.EVENT_INIT",e.GLOBAL_SEARCH_PARAMS="Vidalytics.Global.EVENT_SEARCH_PARAMS"}(Ue||(Ue={})),null!==(De=(Re=window).Vidalytics)&&void 0!==De||(Re.Vidalytics={}),null!==(xe=(Ne=window.Vidalytics).EventType)&&void 0!==xe||(Ne.EventType=Ue);var He,qe,Ye,We,ze="vidalytics_disable_cookie";function Ze(e){var t,n,r,i,o,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];null!==(o=(i=window)._vidalytics)&&void 0!==o||(i._vidalytics={}),window._vidalytics.disableCookie=!e,a&&(e?localStorage.removeItem(ze):localStorage.setItem(ze,String(e))),null===(r=window._vidalytics.tracking)||void 0===r||null===(n=r.eventManager)||void 0===n||null===(t=n.emit)||void 0===t||t.call(n,"cookie:preference",e)}null!==(He=(Oe=window)._vidalytics)&&void 0!==He||(Oe._vidalytics={}),null!==(qe=(Ve=window._vidalytics).tracking)&&void 0!==qe||(Ve.tracking={}),null!==(Ye=(Me=window._vidalytics.tracking).eventManager)&&void 0!==Ye||(Me.eventManager=new D),window._vidalytics.tracking.setCookiePreference=Ze,function(e){e[e.PLAYER=3]="PLAYER",e[e.CONVERSION=2]="CONVERSION",e[e.GLOBAL=1]="GLOBAL",e[e.NONE=0]="NONE"}(We||(We={}));var Je={allowedEvents:[],autoSessionInit:!0,autoUserInit:!0,batchInterval:3e3,batchSize:10,cookieDomain:".".concat(window.location.hostname),cookieExpires:30,deferUserInit:!1,maxParallelRequests:3,priorityLevel:0,retriesLimit:3,searchParamsKey:"_vd",sessionIdKey:"vidalytics_sid",sessionIdLength:10,userIdKey:"vidalytics_uid",disableCookie:!1,immediateEvents:["Vidalytics.EVENT_CONVERSION","Vidalytics.Player.EVENT_CTA_CLICKED","Vidalytics.Player.EVENT_ERROR","Vidalytics.Player.EVENT_FUNNEL_CHOICE_SELECTED","Vidalytics.Player.EVENT_INITIALIZED","Vidalytics.Player.EVENT_LINK_CLICKED","Vidalytics.Player.EVENT_PAUSE","Vidalytics.Player.EVENT_PLAY_GATE","Vidalytics.Player.EVENT_PLAY","Vidalytics.Player.EVENT_PLAYED","Vidalytics.Player.EVENT_RESTART","Vidalytics.Player.EVENT_RESUME","Vidalytics.Player.EVENT_TRIGGER","Vidalytics.Player.EVENT_VIDEO_FULLSCREEN_CLOSE","Vidalytics.Player.EVENT_VIDEO_FULLSCREEN","Vidalytics.Global.EVENT_INIT","Vidalytics.Global.EVENT_SEARCH_PARAMS"]},$e=function(){function e(n){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je,s=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0;r(this,e),a(this,"id",void 0),a(this,"name",void 0),a(this,"config",void 0),a(this,"options",void 0),a(this,"allowedEvents",void 0),a(this,"messages",[]),a(this,"userId",void 0),a(this,"sessionId",void 0),a(this,"isDisconnected",!1),a(this,"isInitialized",!1),a(this,"isFlushing",!1),a(this,"isReturningViewerKey",void 0),a(this,"activeRequestCount",0),a(this,"eventEmitter",void 0),a(this,"request",void 0),a(this,"eventsCount",{}),a(this,"processScheduler",void 0),a(this,"isLocalStorageEnabled",L("localStorage")),a(this,"isSessionStorageEnabled",L("sessionStorage")),a(this,"detachUnloadListener",void 0);var u=this;a(this,"flushMessages",t((function(){return l(this,(function(e){switch(e.label){case 0:return u.isFlushing?[2]:u.hasMessages?(u.isFlushing=!0,[4,u.proccessBatch({isFlush:!0})]):[2];case 1:return e.sent(),u.isFlushing=!1,[2]}}))}))),a(this,"handleVisibilityChange",(function(){"hidden"===document.visibilityState&&i.flushMessages()})),a(this,"handleCookiePreference",(function(e){if(i.userId)if(i.options.disableCookie=!e,e)i.storeUserId(i.userId);else{var t=i.options,n=t.userIdKey,r=t.cookieExpires,o=t.cookieDomain;j.remove(n,{expires:r,domain:o})}})),this.config=n,this.options=v({},Je,o);var d=this.options,f=d.name,h=d.sessionIdLength,y=d.allowedEvents,p=d.priorityLevel,g=d.autoUserInit,m=d.autoSessionInit,w=d.retriesLimit,E={baseUrl:this.config.url,retries:w};this.isReturningViewerKey=this.formatReturningViewerKey(c,s),this.id=U(h),this.name=f,this.allowedEvents=y,this.eventEmitter=new D,this.request=C.createInstance(E),this.registerInstance(),this.setPriorityLevel(p,this.id),this.detachUnloadListener=this.attachUnloadListener(),this.eventsCount={},this.initCookiePreferences(),m&&this.initSession(),g&&setTimeout((function(){return i.initUser()}),0)}return o(e,[{key:"formatReturningViewerKey",value:function(e,t){var n=t||e;if(n)return"vidalytics_".concat(t?"funnel":"video","_").concat(n,"_is_returning")}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}},{key:"off",value:function(e,t){this.eventEmitter.off(e,t)}},{key:"once",value:function(e,t){this.eventEmitter.once(e,t)}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a,s,c;(i=this.eventEmitter).emit.apply(i,[e].concat(R(n)));var u=null===(s=window._vidalytics)||void 0===s||null===(a=s.tracking)||void 0===a?void 0:a.eventManager;null===u||void 0===u||null===(c=u.emit)||void 0===c||(o=c).call.apply(o,[u,e,this.id].concat(R(n)))}},{key:"getEventIndex",value:function(e){if(e){var t,n=null!==(t=this.eventsCount[e])&&void 0!==t?t:1;return this.eventsCount[e]=n+1,n}}},{key:"createMessage",value:function(t){var n,r=Math.ceil(performance.now()),i=this.config,o=i.customerId,s=i.videoId,c=this.options.sessionIdLength,u=this.getEventIndex(null===t||void 0===t?void 0:t.event);return a(n={},e.MESSAGE_ID_KEY,U(c)),a(n,"customerId",o),a(n,"videoId",s),a(n,"timestamp",this.getUnixTimestamp()),a(n,"timeSinceNav",r),a(n,"eventIndex",u),a(n,"sessionId",this.sessionId),a(n,"userId",this.userId),a(n,"player","hls"),n}},{key:"pushMessage",value:function(e){var t=v({},this.createMessage(e),e);this.messages.push(t),this.trigger("message:enqueue",t),this.processMessages()}},{key:"proccessBatch",value:function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isFlush,r=void 0!==n&&n,i=this;return t((function(){var t,n,o,s,c,u,d,f,h,y;return l(this,(function(l){switch(l.label){case 0:if(!i.isInitialized)return[2];if(i.isProcessing&&!r)return[2];i.stopScheduler(),i.activeRequestCount+=1,t=i.options.batchSize,n=i.allowedMessages.slice(0,t),i.deleteMessages(n),o=!0,s=!1,c=void 0;try{for(u=n[Symbol.iterator]();!(o=(d=u.next()).done);o=!0)f=d.value,i.trigger("message:dequeue",f)}catch(p){s=!0,c=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}l.label=1;case 1:return l.trys.push([1,3,,4]),h=n.map((function(t){return M(v({},t),a({userId:i.userId},e.MESSAGE_ID_KEY,void 0))})),[4,i.sendMessages(h)];case 2:return l.sent(),[3,4];case 3:return y=l.sent(),console.error(y),i.restoreMessages(n),i.handleDisconnect(),[3,4];case 4:return i.activeRequestCount-=1,i.processMessages(),[2]}}))}))()}},{key:"processMessages",value:function(){var e=this;return t((function(){var t,n,r;return l(this,(function(i){switch(i.label){case 0:return t=e.isInitialized&&e.userId,n=e.isProcessing||e.isDisconnected,r=!e.hasMessages,!t||n||r?[2]:e.isBatchAllowed||e.isBatchHighPriority?[4,e.proccessBatch()]:[2,e.startScheduler()];case 1:return i.sent(),[2]}}))}))()}},{key:"deleteMessages",value:function(t){var n=new Set(Le(t).map((function(t){return t[e.MESSAGE_ID_KEY]})));this.messages=this.messages.filter((function(t){return!n.has(t[e.MESSAGE_ID_KEY])}))}},{key:"restoreMessages",value:function(e){this.messages=R(Le(e)).concat(R(this.messages))}},{key:"sendMessages",value:function(e){var n=this;return t((function(){var t,r,i,o,a,s,c,u,d,f;return l(this,(function(l){switch(l.label){case 0:return r={"Content-Type":"text/plain; charset=utf-8"},i=Array.isArray(e)?{events:e}:e,1===(null===(t=i.events)||void 0===t?void 0:t.length)&&(i=i.events[0]),n.isFlushing&&n.isBeaconSupported?(o=n.config.url,navigator.sendBeacon("".concat(o).concat(Ge),JSON.stringify(i)),[3,3]):[3,1];case 1:return[4,n.request.post(Ge,i,{headers:r})];case 2:l.sent(),l.label=3;case 3:a=!0,s=!1,c=void 0;try{for(u=Le(e)[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)f=d.value,n.trigger("message:dispatch",f)}catch(h){s=!0,c=h}finally{try{a||null==u.return||u.return()}finally{if(s)throw c}}return[2]}}))}))()}},{key:"attachUnloadListener",value:function(){var e=this;return window.addEventListener("visibilitychange",this.handleVisibilityChange),function(){window.removeEventListener("visibilitychange",e.handleVisibilityChange)}}},{key:"startScheduler",value:function(){var e=this;if(!this.processScheduler){var t=this.options.batchInterval;this.isFlushing&&(t=0),this.processScheduler=setTimeout((function(){e.stopScheduler(),e.proccessBatch()}),t)}}},{key:"stopScheduler",value:function(){this.processScheduler&&(clearTimeout(this.processScheduler),this.processScheduler=void 0)}},{key:"handleReconnect",value:function(){this.isDisconnected=!1,this.processMessages(),this.trigger("connect")}},{key:"init",value:function(){this.isInitialized=!0,this.processMessages(),this.trigger("init")}},{key:"handleDisconnect",value:function(){this.isDisconnected=!0,this.checkConnection(),this.trigger("disconnect")}},{key:"checkConnection",value:function(){var e=this;return t((function(){var t;return l(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e.request.get("/ping")];case 1:return n.sent(),e.isInitialized?(e.handleReconnect(),[3,3]):[2,e.initUser()];case 2:return t=n.sent(),console.error(t),[3,3];case 3:return[2]}}))}))()}},{key:"initSession",value:function(){var e=this.options,t=e.sessionIdKey,n=e.sessionIdLength,r=this.getSessionId();if(r)return this.sessionId=r,this.storeSessionId(r),void this.trigger("init:session",r);var i=U(n);this.sessionId=i,sessionStorage.setItem(t,i),this.trigger("init:session",i)}},{key:"destroy",value:function(){var e,t,n;null===(n=window._vidalytics)||void 0===n||(null===(t=n.tracking)||void 0===t||(null===(e=t.instances)||void 0===e||delete e[this.id])),this.eventEmitter.removeAllListeners(),this.trigger("destroy")}},{key:"registerInstance",value:function(){var e,t,n,r,i,o,a,s;null!==(o=(n=window)._vidalytics)&&void 0!==o||(n._vidalytics={}),null!==(a=(r=window._vidalytics).tracking)&&void 0!==a||(r.tracking={}),null!==(s=(i=window._vidalytics.tracking).instances)&&void 0!==s||(i.instances={}),window._vidalytics.tracking.instances[this.id]=this;var c=this.options.priorityLevel,u=null===(t=window._vidalytics)||void 0===t||null===(e=t.tracking)||void 0===e?void 0:e.priorityLevel;this.isPriorityHigher(u,c)||(window._vidalytics.tracking.activeInstanceId=this.id,this.trigger("init:instance"))}},{key:"isPriorityHigher",value:function(e,t){return e&&t&&e>t}},{key:"setPriorityLevel",value:function(e,t){var n,r,i,o,a,s,c=null===(r=window._vidalytics)||void 0===r||null===(n=r.tracking)||void 0===n?void 0:n.priorityLevel;this.isPriorityHigher(c,e)||(null!==(a=(i=window)._vidalytics)&&void 0!==a||(i._vidalytics={}),null!==(s=(o=window._vidalytics).tracking)&&void 0!==s||(o.tracking={}),window._vidalytics.tracking.priorityLevel=e,this.trigger("init:priority",e))}},{key:"initCookiePreferences",value:function(){var e,t,n,r=this.options.disableCookie,i=!!(null===(e=window._vidalytics)||void 0===e?void 0:e.disableCookie);r&&!i&&Ze(!1,!1);var o=null===(n=window._vidalytics)||void 0===n||null===(t=n.tracking)||void 0===t?void 0:t.eventManager;o&&o.on("cookie:preference",this.handleCookiePreference)}},{key:"fetchUserData",value:function(e){var n=this;return t((function(){var t,r,i,o;return l(this,(function(a){switch(a.label){case 0:return t=n.config.customerId,[4,Ce()];case 1:return r=a.sent(),i={cid:t},e&&(i.uid=e),o={fp:r},[4,n.request.post("/awesome-log",o,{params:i})];case 2:return[2,a.sent().data]}}))}))()}},{key:"initUserData",value:function(){var e=this;return t((function(){var t,n,r,i,o,a,s,c,u;return l(this,(function(l){switch(l.label){case 0:if(null===(n=window._vidalytics)||void 0===n||null===(t=n.tracking)||void 0===t?void 0:t.hasUserDataInit)return[2];if(!(null===(i=window._vidalytics)||void 0===i||null===(r=i.tracking)||void 0===r?void 0:r.isUserDataInitAllowed))return[2];if(!e.isActiveInstance)return[2];null!==(s=(o=window)._vidalytics)&&void 0!==s||(o._vidalytics={}),null!==(c=(a=window._vidalytics).tracking)&&void 0!==c||(a.tracking={}),window._vidalytics.tracking.hasUserDataInit=!0,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,e.fetchUserData(e.userId)];case 2:return u=l.sent(),e.trigger("init:userdata",u),[3,4];case 3:return l.sent(),window._vidalytics.tracking.hasUserDataInit=!1,[3,4];case 4:return[2]}}))}))()}},{key:"fetchUserId",value:function(){var e=this;return t((function(){var t,n,r,i,o,a,s,c,u;return l(this,(function(l){switch(l.label){case 0:return r=e.config.customerId,i={cid:r},[4,e.request.get("/awesome-log",{params:i})];case 1:return o=l.sent(),(a=o.headers.etag)?(s=e.parseUserIdFromEntityTag(a),null!==(c=(t=window)._vidalytics)&&void 0!==c||(t._vidalytics={}),null!==(u=(n=window._vidalytics).tracking)&&void 0!==u||(n.tracking={}),window._vidalytics.tracking.isUserDataInitAllowed=!0,[2,s]):[2]}}))}))()}},{key:"initUser",value:function(){var e=this;return t((function(){var t,n,r,i,o,a,s,c,u,d,f,h,v,y,p,g,m,w,E,b,S,_;return l(this,(function(l){switch(l.label){case 0:if(e.userId)return[2];if(t=e.getUserId())return e.userId=t,e.storeUserId(t),e.isReturningViewerKey&&!localStorage.getItem(e.isReturningViewerKey)&&localStorage.setItem(e.isReturningViewerKey,Ae.FIRST),e.init(),e.trigger("init:user",e.userId),[2];l.label=1;case 1:return l.trys.push([1,5,,6]),c=e.options,u=c.deferUserInit,d=c.deferUserInitTimeout,f=null===(r=window._vidalytics)||void 0===r||null===(n=r.tracking)||void 0===n?void 0:n.hasUserInit,h=null===(o=window._vidalytics)||void 0===o||null===(i=o.tracking)||void 0===i?void 0:i.hasUserInitError,f&&!h||!e.isActiveInstance||u?[4,Fe(null===(y=window._vidalytics)||void 0===y||null===(v=y.tracking)||void 0===v?void 0:v.eventManager,"init:user",u?d:void 0)]:[3,3];case 2:return l.sent(),e.initUser(),[2];case 3:return null!==(p=(a=window)._vidalytics)&&void 0!==p||(a._vidalytics={}),null!==(g=(s=window._vidalytics).tracking)&&void 0!==g||(s.tracking={}),window._vidalytics.tracking.hasUserInit=!0,window._vidalytics.tracking.hasUserInitError=!1,[4,e.fetchUserId()];case 4:return(m=l.sent())&&(e.userId=m,e.storeUserId(m),e.isReturningViewerKey&&e.isLocalStorageEnabled&&localStorage.setItem(e.isReturningViewerKey,Ae.FIRST),e.init(),e.trigger("init:user",e.userId)),[3,6];case 5:if(function(e){return e instanceof Be}(w=l.sent()))throw w;return null!==(S=(E=window)._vidalytics)&&void 0!==S||(E._vidalytics={}),null!==(_=(b=window._vidalytics).tracking)&&void 0!==_||(b.tracking={}),window._vidalytics.tracking.hasUserInitError=!0,w&&console.error(w),e.checkConnection(),[3,6];case 6:return[2]}}))}))()}},{key:"parseUserIdFromEntityTag",value:function(e){return u(/^"(.+)\/(.+)"$/.exec(e),3)[2]}},{key:"parseSearchParamUserIds",value:function(e){if(!e)return{};var t=u(e.split(","),2);return{userId:t[0],sessionId:t[1]}}},{key:"getUserId",value:function(){var e,t=this.options,n=t.userIdKey,r=t.searchParamsKey,i=new URLSearchParams(window.location.search).get(r);i&&(e=this.parseSearchParamUserIds(i).userId);return!e&&this.isLocalStorageEnabled&&(e=localStorage.getItem(n)),e||(e=j.get(n)),e}},{key:"storeUserId",value:function(e){var t=this.options,n=t.userIdKey,r=t.cookieExpires,i=t.cookieDomain;this.isLocalStorageEnabled&&localStorage.setItem(n,e),this.isCookieDisabled?j.remove(n,{domain:i}):j.set(n,e,{expires:r,domain:i})}},{key:"getSessionId",value:function(){var e,t=this.options,n=t.sessionIdKey,r=t.searchParamsKey,i=new URLSearchParams(window.location.search).get(r);i&&(e=this.parseSearchParamUserIds(i).sessionId);return!e&&this.isSessionStorageEnabled&&(e=sessionStorage.getItem(n)),e}},{key:"storeSessionId",value:function(e){if(this.isSessionStorageEnabled){var t=this.options.sessionIdKey;sessionStorage.setItem(t,e)}}},{key:"getUnixTimestamp",value:function(){return Math.floor(Date.now()/1e3)}},{key:"setAllowedEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.allowedEvents=e,this.processMessages()}},{key:"isActiveInstance",get:function(){var e,t;return(null===(t=window._vidalytics)||void 0===t||null===(e=t.tracking)||void 0===e?void 0:e.activeInstanceId)===this.id}},{key:"isBatchAllowed",get:function(){var e=this.options.batchSize;return!!this.isFlushing||this.allowedMessages.length>=e}},{key:"isBatchHighPriority",get:function(){var e=this.options.immediateEvents,t=new Set(e);return this.allowedMessages.some((function(e){return t.has(e.event)}))}},{key:"allowedMessages",get:function(){var e=this;return 0===this.allowedEvents.length?this.messages:this.messages.filter((function(t){return e.allowedEvents.includes(t.event)}))}},{key:"isProcessing",get:function(){var e=this.options.maxParallelRequests;return!this.isFlushing&&this.activeRequestCount>=e}},{key:"isBeaconSupported",get:function(){return Boolean("undefined"!==typeof navigator&&navigator.sendBeacon)}},{key:"hasMessages",get:function(){return this.allowedMessages.length>0}},{key:"isCookieDisabled",get:function(){var e,t=this.options.disableCookie,n=!!(null===(e=window._vidalytics)||void 0===e?void 0:e.disableCookie),r=localStorage.getItem(ze);return t||n||r}}]),e}();a($e,"MESSAGE_ID_KEY","__message_id__");var Xe=$e;var Qe=function(e){if(!e)return"production";try{return/[.-]dev\.?/gi.test(e)?"development":"production"}catch(t){return"production"}};function et(e){return tt.apply(this,arguments)}function tt(){return tt=t((function(e){var t,n,r=arguments;return l(this,(function(i){switch(i.label){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:{},n=r.length>2&&void 0!==r[2]?r[2]:{},!function(e){var t;return!(null===e||void 0===e?void 0:e.saveData)&&!(null===e||void 0===e||null===(t=e.effectiveType)||void 0===t?void 0:t.includes("2g"))}(navigator.connection)&&!t.ignoreNetwork?[2]:(t.baseUrl&&(e="".concat(t.baseUrl).concat(e)),t.delayMs?[4,S(t.delayMs)]:[3,2]);case 1:i.sent(),i.label=2;case 2:return function(){var e,t,n=document.createElement("link");return!!(null===n||void 0===n||null===(t=n.relList)||void 0===t||null===(e=t.supports)||void 0===e?void 0:e.call(t,"prefetch"))}()||t.forceLink?[2,new Promise((function(t,r){var i=document.createElement("link");for(var o in i.rel="prefetch",i.href=e,i.onload=t,i.onerror=r,n)i[o]=n[o];document.head.appendChild(i)}))]:[2,C.get(e)]}}))})),tt.apply(this,arguments)}var nt={hasPrefetch:!0,prefetchDelay:1e3,prefetchBaseDelay:3e3,userInitTimeout:9e3,hasCrossDomainLinks:!0,hasUrlParamsForward:!0,ignoreInternalLinks:!0,searchParamsKey:"_vd",baseUrl:"https://fast.vidalytics.com",trackingUrl:"https://stats.dev.vidalytics.com",trackingOptions:{name:"global",autoUserInit:!1,priorityLevel:We.GLOBAL}},rt=function(){function e(){var n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),a(this,"config",void 0),a(this,"customerId",void 0),a(this,"env",void 0),a(this,"tracking",void 0),a(this,"scriptElement",void 0),a(this,"localStorageEnabled",L("localStorage")),a(this,"sessionStorageEnabled",L("sessionStorage"));var o=this;a(this,"handlePrefetch",t((function(){var e,t,n,r,i,a,s,c,u;return l(this,(function(l){switch(l.label){case 0:return e=o.config,t=e.prefetchBaseDelay,n=e.prefetchDelay,et(r=e.baseUrl,{ignoreNetwork:!0,forceLink:!0},{rel:"preconnect"}),[4,S(t)];case 1:return l.sent(),o.isPrefetchForbidden()?[2]:[4,o.fetchResourceConfig()];case 2:if(i=l.sent(),!(a=null===i||void 0===i?void 0:i.assets)||0===a.length)return[2];s=0,l.label=3;case 3:if(!(s<a.length))return[3,9];c=a[s],l.label=4;case 4:return l.trys.push([4,7,,8]),[4,S(n*(s+1))];case 5:return l.sent(),o.isPrefetchForbidden()?[2]:[4,et(c,{baseUrl:r})];case 6:return l.sent(),[3,8];case 7:return u=l.sent(),console.warn("[Vidalytics Global Script] Failed to prefetch the asset at `".concat(c,"`."),u),[3,8];case 8:return s++,[3,3];case 9:return[2]}}))}))),a(this,"handleDocumentMouseDown",(function(e){var t=n.config,r=t.searchParamsKey,i=t.ignoreInternalLinks,o=n.tracking,s=o.userId,c=o.sessionId;if(s){for(var u=e.target,l=0;l<100&&(u&&"A"!==u.nodeName);l++)u=u.parentElement;if(u&&"A"===u.nodeName){var d=u.getAttribute("href");if(d){var f=new URL(d,window.location.href),h=f.host!==window.location.host;if(!i||h){var v=s;c&&(v+=",".concat(c));var y=a({},r,v),p=new URLSearchParams(y).toString();if(!f.searchParams.has(r)){var g=f.searchParams.size>0?"&":"?",m=d.replace(/(#[^?]*|$)/,"".concat(g).concat(p,"$1"));u.setAttribute("href",m)}}}}}})),this.config=N(nt,i),this.scriptElement=this.getScriptElement(),this.customerId=this.getCustomerId(),this.env=this.getEnvironment();var s=this.getTrackingUrl();this.tracking=new Xe({url:s,customerId:this.customerId},this.config.trackingOptions)}return o(e,[{key:"init",value:function(){var e=this;return t((function(){var t,n,r;return l(this,(function(i){return t=e.config,n=t.hasPrefetch,r=t.hasCrossDomainLinks,e.initTracking(),r&&e.initCrossDomainLinks(),n&&e.initPrefetch(),[2]}))}))()}},{key:"initTracking",value:function(){var e=this;return t((function(){var t,n,r,i;return l(this,(function(o){switch(o.label){case 0:return t=e.config,n=t.prefetchBaseDelay,r=t.prefetchDelay,i=t.userInitTimeout,[4,S(n)];case 1:o.sent(),e.isPrefetchForbidden()&&(e.tracking.options.deferUserInit=!0,e.tracking.options.deferUserInitTimeout=i),o.label=2;case 2:return o.trys.push([2,4,,13]),[4,e.tracking.initUser()];case 3:return o.sent(),[3,13];case 4:if(o.sent(),!e.isPrefetchForbidden({isStrict:!0}))return[3,10];o.label=5;case 5:return o.trys.push([5,7,,9]),[4,e.tracking.initUser()];case 6:return o.sent(),[3,9];case 7:return o.sent(),e.tracking.options.deferUserInit=!1,[4,e.tracking.initUser()];case 8:return o.sent(),[3,9];case 9:return[3,12];case 10:return e.tracking.options.deferUserInit=!1,[4,e.tracking.initUser()];case 11:o.sent(),o.label=12;case 12:return[3,13];case 13:return[4,S(r)];case 14:return o.sent(),e.initUrlSearchParams(),[4,S(n)];case 15:return o.sent(),[4,e.tracking.initUserData()];case 16:return o.sent(),[2]}}))}))()}},{key:"initCrossDomainLinks",value:function(){document.addEventListener("mousedown",this.handleDocumentMouseDown)}},{key:"initUrlSearchParams",value:function(){var e=window.location.search,t=Object.fromEntries(new URLSearchParams(e));0===Object.keys(t).length||this.tracking.pushMessage({event:Ue.GLOBAL_SEARCH_PARAMS,referer:document.referrer,site:window.location.href,data:t})}},{key:"initPrefetch",value:function(){var e=this;return t((function(){return l(this,(function(t){switch(t.label){case 0:return"complete"===document.readyState?[4,e.handlePrefetch()]:[3,2];case 1:return t.sent(),[3,3];case 2:window.addEventListener("load",e.handlePrefetch),t.label=3;case 3:return[2]}}))}))()}},{key:"fetchResourceConfig",value:function(){var e=this;return t((function(){var t,n,r,i,o;return l(this,(function(a){switch(a.label){case 0:if(!e.customerId)return[2];t=e.config,n=t.baseUrl,r=t.prefetchBaseDelay,i={hash:window.location.href},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,C.get("/global/".concat(e.customerId,"/prefetch.json"),{baseUrl:n,params:i,retries:2,retryDelay:r})];case 2:return[2,a.sent().data];case 3:return o=a.sent(),console.error("[Vidalytics Global Script] Failed to load the list of assets for Customer ID `".concat(e.customerId,"`."),o),[3,4];case 4:return[2]}}))}))()}},{key:"parseSearchParamUserIds",value:function(e){if(!e)return{};var t=u(e.split(","),2);return{userId:t[0],sessionId:t[1]}}},{key:"cleanupSearchParams",value:function(){var e=this.config.searchParamsKey,t=new URL(window.location.href);t.searchParams.has(e)&&(t.searchParams.delete(e),window.history.replaceState({},"",t.toString()))}},{key:"getScriptElement",value:function(){var e=document.querySelector('script[id^="vid_glb_"]');return e||(e=document.querySelector("script[data-cid]"))}},{key:"getCustomerId",value:function(){var e;if(this.scriptElement){var t=this.scriptElement.dataset.cid;return t||(t=null===(e=this.scriptElement.id)||void 0===e?void 0:e.replace("vid_glb_",""))}}},{key:"getTrackingUrl",value:function(){return je[this.env].TRACKING_BASE_URL}},{key:"getEnvironment",value:function(){var e;return Qe(null===(e=this.scriptElement)||void 0===e?void 0:e.src)}},{key:"isPrefetchForbidden",value:function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isStrict,n=void 0!==t&&t;if(!!window.VidalyticsL)return!0;if(!!window.VidalyticsC)return!0;if(!!(null===(e=window._vidalytics)||void 0===e?void 0:e.embeds)&&Object.keys(window._vidalytics.embeds).length>0)return!0;if(!n&&!!document.querySelector('[id^="vidalytics_embed"]'))return!0;return!!document.querySelector('script[src*="vidalytics"][src*="loader.min.js"]')||(!!document.querySelector('script[src*="vidalytics"][src*="conversion.min.js"]')||!(!document.querySelector('script[data-vidalytics][src^="blob"]')&&!document.querySelector('script[src*="vidalytics"][src*="player.min.js"]')))}},{key:"destroy",value:function(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),window.removeEventListener("load",this.handlePrefetch)}}],[{key:"isInjectedToGlobal",get:function(){var e;return!!(null===(e=window.Vidalytics)||void 0===e?void 0:e.GlobalScript)}},{key:"injectToGlobal",value:function(){window.Vidalytics||(window.Vidalytics={}),window.Vidalytics.GlobalScript=e}}]),e}(),it=rt;!function(){if(!it.isInjectedToGlobal){it.injectToGlobal(),window._vidalytics||(window._vidalytics={}),window._vidalytics.global||(window._vidalytics.global={}),window._vidalytics.global.wasInitialized=!0;var e=window._vidalytics.global.config;new it(e).init()}}()}()}();